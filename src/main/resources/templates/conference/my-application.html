<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">

    <title>Моя заявка - СНО ОмГУПС</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand" href="/">СНО ОмГУПС</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/conference">О конференции</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/conference/sections">Секции</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/conference/requirements">Требования</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/portfolio/my">Портфолио</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/logout">Выйти</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="container my-5">
    <h1 class="text-center mb-4">Моя заявка на участие</h1>

    <div class="row">
        <div class="col-md-8 offset-md-2">
            <div class="card mb-4">
                <div class="card-header" th:classappend="${application.status == 'APPROVED'} ? 'bg-success text-white' :
                                                                 ${application.status == 'REJECTED'} ? 'bg-danger text-white' :
                                                                 'bg-warning'">
                    <h4 class="mb-0">
                        Статус заявки:
                        <span th:text="${application.status == 'PENDING' ? 'На рассмотрении' :
                                           application.status == 'APPROVED' ? 'Одобрена' :
                                           application.status == 'REJECTED' ? 'Отклонена' : application.status}">
                                На рассмотрении
                            </span>
                    </h4>
                </div>
                <div class="card-body">
                    <table class="table">
                        <tr>
                            <th style="width: 200px;">Дата подачи:</th>
                            <td th:text="${#temporals.format(application.applicationDate, 'dd.MM.yyyy HH:mm')}">20.02.2026 15:30</td>
                        </tr>
                        <tr>
                            <th>Конференция:</th>
                            <td th:text="${application.conference.title}">Название конференции</td>
                        </tr>
                        <tr>
                            <th>Секция:</th>
                            <td th:text="${application.section.name}">Название секции</td>
                        </tr>
                        <tr>
                            <th>Название статьи:</th>
                            <td th:text="${application.articleTitle}">Название статьи</td>
                        </tr>
                        <tr th:if="${application.coAuthors}">
                            <th>Соавторы:</th>
                            <td th:text="${application.coAuthors}">Иванов И.И.</td>
                        </tr>
                        <tr>
                            <th>Файл статьи:</th>
                            <td>
                                <a th:href="@{/files/articles/{id}(id=${application.id})}"
                                   class="btn btn-sm btn-outline-primary" target="_blank">
                                    <i class="bi bi-file-text"></i> Скачать статью
                                </a>
                            </td>
                        </tr>
                    </table>

                    <div th:if="${application.status == 'APPROVED'}" class="alert alert-success">
                        <i class="bi bi-check-circle"></i>
                        Поздравляем! Ваша заявка одобрена. Ожидайте подробную информацию по email.
                    </div>

                    <div th:if="${application.status == 'REJECTED'}" class="alert alert-danger">
                        <i class="bi bi-x-circle"></i>
                        К сожалению, ваша заявка отклонена.
                        Подробности можно узнать в оргкомитете.
                    </div>

                    <div th:if="${application.status == 'PENDING'}" class="alert alert-warning">
                        <i class="bi bi-hourglass-split"></i>
                        Ваша заявка находится на рассмотрении. Мы сообщим вам о решении по email.
                    </div>

                    <div class="d-grid gap-2 mt-3">
                        <a href="/portfolio/my" class="btn btn-primary">Вернуться в портфолио</a>
                        <a href="/conference" class="btn btn-outline-secondary">К информации о конференции</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<footer class="bg-dark text-white py-4 mt-5">
    <div class="container text-center">
        <p>© 2026 Студенческое научное общество ОмГУПС</p>
        <p>г. Омск, пр. Маркса, 35</p>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>